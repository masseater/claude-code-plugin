---
argument-hint: <計画の説明>
description: タスクの基本骨格を作成（Phase構成なし、調査項目とプロジェクト概要のみ）
---

# タスクの基本骨格を作成します

計画の説明をもとに、タスクの基本骨格（ディレクトリ、調査項目、プロジェクト概要）を作成します。

**重要**: このコマンドはPhase構成を作成しません。Phase構成は調査完了後に `/sdd:plan-phases` で作成してください。

【計画内容】
$ARGUMENTS

## 実行手順

### 0. ステアリングドキュメントの読み込み

以下のステアリングドキュメントを読み込み、プロジェクトのコンテキストを把握：

- `specs/_steering/product.md` - プロダクト方針
- `specs/_steering/tech.md` - 技術スタック
- `specs/_steering/structure.md` - プロジェクト構造

**ステアリングドキュメントが存在しない場合**:
- 警告メッセージを表示: 「⚠️ ステアリングドキュメントが見つかりません。先に `/sdd:steering` を実行することを推奨します。」
- AskUserQuestionツールで確認:
  - 「ステアリングドキュメントなしで続行しますか？」
  - 選択肢: 「はい（続行）」「いいえ（中断して /sdd:steering を実行）」
- 「いいえ」の場合は処理を中断

### 1. 引数チェック

`$ARGUMENTS` が空の場合：
- `specs/` ディレクトリ配下の既存タスク一覧（ディレクトリ名）を取得
- タスクが存在する場合、AskUserQuestionツールで「どのタスクに着手しますか？」と質問し、選択させる
- タスクが存在しない場合、「specs/配下にタスクがありません。計画内容を入力してください」とユーザーに伝える
- 選択されたタスクは既存のため、処理を終了（既存タスクの初期化は不要）

`$ARGUMENTS` が指定されている場合：
- タスク名生成（手順2）へ進む

### 2. タスク名の生成

計画内容から適切なタスク名（ディレクトリ名）を生成：

- プロジェクト内容を端的に表す英数字とハイフンのみの名前
- 例: `user-authentication`, `payment-integration`, `admin-dashboard`, `api-v2-migration`
- 生成したタスク名をユーザーに提示し、**AskUserQuestionツールで確認**を取る

### 3. ディレクトリの確認と作成

1. 現在のディレクトリに `specs/` フォルダが存在するか確認
2. 存在しない場合は、**AskUserQuestionツールで**「specs/ フォルダを作成してもよろしいですか？」と確認
3. 確認が取れたら `specs/[taskname]/` ディレクトリを作成

### 4. research.mdの生成

`specs/[taskname]/research.md` を生成：

```markdown
# 調査項目リスト

このドキュメントでは、プロジェクトのPhase分けと実装を開始する前に調査・検証が必要な項目を管理します。

**⚠️ 重要**: Phase分けは、このドキュメントの全ての調査項目が完了した後に実施してください。

## 調査ステータス
- **全体ステータス**: 未着手
- **調査完了項目数**: 0 / {総数}

## 調査項目

[計画内容とステアリングドキュメント（tech.md）から調査が必要な技術的項目を抽出]

### 調査項目1: [調査項目名]
- **カテゴリ**: 技術選定/アーキテクチャ/実装方法/パフォーマンス/セキュリティ/その他
- **ステータス**: 未着手
- **優先度**: High/Medium/Low
- **調査内容**:
  - 何を調査するのか具体的に記述
- **調査方法**:
  - どのように調査するか（PoC作成、ベンチマーク、ドキュメント調査など）
- **判断基準**:
  - 何を基準に判断するか
- **調査結果**: （調査完了後に記入）
- **結論**: （調査完了後に記入）
- **影響範囲**: この調査結果が影響するPhaseや機能

## 調査完了後のチェックリスト
- [ ] 全ての調査項目が完了している
- [ ] 調査結果がoverview.md、specification.md、technical-details.mdに反映されている
- [ ] 技術的な不確実性が解消されている
- [ ] Phase分けに必要な情報が揃っている

**調査完了後**: `/sdd:plan-phases [taskname]` コマンドでPhase構成を決定できます
```

**調査項目の抽出基準**:
- ステアリングドキュメント（tech.md）に記載されていない技術要素
- 複数の選択肢がある技術選定（例: 認証ライブラリ、状態管理ライブラリ）
- パフォーマンス要件の実現可能性
- 新しい技術やアーキテクチャパターンの検証

### 5. overview.mdの生成（Phase構成なし）

`specs/[taskname]/overview.md` を生成：

```markdown
# プロジェクト全容ドキュメント

## プロジェクト概要
- **プロジェクト名**: [タスク名]
- **目的と背景**: [計画内容から抽出]
- **主要な目標**: [計画内容から抽出]

## プロジェクトステータス
- **ステータス**: 未着手

## スコープ
### 対象範囲
- [計画内容から抽出]

### 対象外の範囲
- [計画内容から明示的に除外されているもの]
- [ステアリングドキュメント（product.md）のNon-Goalsから関連するもの]

## 主要機能
- [機能1の概要]
- [機能2の概要]
- [機能3の概要]

## 成果物
- [最終的な成果物一覧]

## リスクと制約
- **想定されるリスク**: [計画内容から抽出]
- **技術的制約**: [ステアリングドキュメント（tech.md）から関連する制約]
- **ビジネス的制約**: [ステアリングドキュメント（product.md）から関連する制約]

---

**⚠️ Phase構成について**:
Phase構成は調査完了後に `/sdd:plan-phases [taskname]` コマンドで追加されます。
先にPhase構成を決定すると、調査結果によって大幅な手戻りが発生する可能性があります。
```

**生成時の注意点**:
- 計画内容が曖昧な場合でも、無理に詳細化しない
- 不明な点は「**不明**」と明記し、複数の案（案A、案B、案C）を提示
- ステアリングドキュメントの情報を積極的に活用
- Phase構成セクションは**絶対に含めない**

### 6. 完了報告

```markdown
✅ タスクの基本骨格を作成しました
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📍 作成先: specs/[taskname]/

📝 作成されたファイル:
   - research.md (調査項目リスト - [N]件の調査項目を抽出)
   - overview.md (プロジェクト概要のみ、Phase構成なし)

📊 抽出された調査項目: [N]件
   - 技術選定: [N]件
   - アーキテクチャ: [N]件
   - 実装方法: [N]件
   - その他: [N]件

💡 次のアクション（推奨順）:
   1. **要件詳細化**: `/sdd:define-requirements [taskname]` で要件を詳細化
   2. **技術詳細化**: `/sdd:define-technical [taskname]` で技術仕様を作成
   3. **整合性チェック**: `/sdd:contradiction-check [taskname]` でドキュメント間の矛盾をチェック
   4. **実現可能性検証**: `/sdd:validate-feasibility [taskname]` で実プロジェクトとの整合性を検証
   5. **技術調査**: `/sdd:conduct-research [taskname]` で技術的な調査項目を実施
   6. **ビジネス要件確認**: `/sdd:clarify-spec [taskname]` で不明箇所をユーザーに確認
   7. **Phase構成決定**: 調査と確認が完了したら `/sdd:plan-phases [taskname]` でPhase構成を決定

⚠️ 重要:
   - Phase構成は調査完了後に決定してください
   - 早期にPhase分けすると、調査結果による手戻りが発生します
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

## 注意事項

- **⚠️ 重要**: このコマンドはPhase構成を作成しません
- **⚠️ 重要**: Phase構成は調査完了後に `/sdd:plan-phases` で作成してください
- **⚠️ 重要**: ステアリングドキュメント（`specs/_steering/`）を必ず読み込み、プロジェクトのコンテキストを反映してください
- 不明なところは勝手に決めずに「**不明**」と明記し、複数の案（案A、案B、案Cなど）を記述すること
- 「将来的に必要になる」「今後〜が必要」といった適当な推測に基づいた記述は禁止
- 現時点で明確に必要なことのみを記載すること
