---
argument-hint: <計画の説明>
description: タスクの基本骨格を作成（ディレクトリとoverview.mdのみ）
allowed-tools: ["Read", "Write", "Task"]
---

# タスクの基本骨格を作成します

計画の説明をもとに、タスクの基本骨格（ディレクトリとoverview.md）を作成します。

**重要**: このコマンドは最小限の情報のみ作成します。実装概要と調査項目は `/sdd:plan-implementation` で追加してください。

【計画内容】
$ARGUMENTS

## 実行手順

### 0. ステアリングドキュメントの読み込み

以下のステアリングドキュメントを読み込み、プロジェクトのコンテキストを把握：

- `specs/_steering/product.md` - プロダクト方針
- `specs/_steering/tech.md` - 技術スタック
- `specs/_steering/structure.md` - プロジェクト構造
- `specs/_steering/principles.md` - 開発原則

**ステアリングドキュメントが存在しない場合**:
- 警告メッセージを表示: 「⚠️ ステアリングドキュメントが見つかりません。先に `/sdd:steering` を実行することを推奨します。」
- AskUserQuestionツールで確認:
  - 「ステアリングドキュメントなしで続行しますか？」
  - 選択肢: 「はい（続行）」「いいえ（中断して /sdd:steering を実行）」
- 「いいえ」の場合は処理を中断

### 1. 引数チェック

`$ARGUMENTS` が空の場合：
- `specs/` ディレクトリ配下の既存タスク一覧（ディレクトリ名）を取得
- タスクが存在する場合、AskUserQuestionツールで「どのタスクに着手しますか？」と質問し、選択させる
- タスクが存在しない場合、「specs/配下にタスクがありません。計画内容を入力してください」とユーザーに伝える
- 選択されたタスクは既存のため、処理を終了（既存タスクの初期化は不要）

`$ARGUMENTS` が指定されている場合：
- タスク名生成（手順2）へ進む

### 2. タスク名の生成

計画内容から適切なタスク名（ディレクトリ名）を生成：

- プロジェクト内容を端的に表す英数字とハイフンのみの名前
- 例: `user-authentication`, `payment-integration`, `admin-dashboard`, `api-v2-migration`
- 生成したタスク名をユーザーに提示し、**AskUserQuestionツールで確認**を取る

### 3. ディレクトリの確認と作成

1. 現在のディレクトリに `specs/` フォルダが存在するか確認
2. 存在しない場合は、**AskUserQuestionツールで**「specs/ フォルダを作成してもよろしいですか？」と確認
3. 確認が取れたら `specs/[taskname]/` ディレクトリを作成

### 4. overview.mdの生成

`specs/[taskname]/overview.md` を生成：

```markdown
# [タスク名]

## 目的
[計画内容から「何を達成したいのか」を1-3行で記述]

## スコープ
### 含まれるもの
- [計画内容から抽出]

### 含まれないもの
- [計画内容から明示的に除外されているもの]
- [ステアリングドキュメント（product.md）のNon-Goalsから関連するもの]

## 想定される成果物
- [成果物1]
- [成果物2]
- [成果物3]

---

**次のステップ**: `/sdd:plan-implementation [taskname]` で実装概要と調査項目を特定してください
```

**生成時の注意点**:
- 計画内容が曖昧な場合でも、無理に詳細化しない
- 不明な点は「**不明**」と明記
- ステアリングドキュメントの情報を積極的に活用
- **実装概要、調査項目、技術スタックは含めない**（plan-implementationで追加）

### 5. 完了報告

```markdown
✅ タスクの基本骨格を作成しました
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📍 作成先: specs/[taskname]/
📝 作成ファイル: overview.md

💡 次のアクション:
   - 実装概要と調査項目の特定: `/sdd:plan-implementation [taskname]`
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

## 注意事項

- **⚠️ 重要**: このコマンドは最小限の情報（目的、スコープ、成果物）のみ作成します
- **⚠️ 重要**: 実装概要と調査項目は `/sdd:plan-implementation` で追加してください
- **⚠️ 重要**: ステアリングドキュメント（`specs/_steering/`）を必ず読み込み、プロジェクトのコンテキストを反映してください
- **⚠️ 重要** 不明なところは勝手に決めずに「**不明**」と明記すること
- 「将来的に必要になる」「今後〜が必要」といった適当な推測に基づいた記述は禁止
- 現時点で明確に必要なことのみを記載すること

## 内部品質チェック

**重要**: 以下のチェックはコマンド内部で実施し、**生成されるspecファイルには結果を記載しません**。

### ステアリングドキュメントレビュー（内部処理）

ドキュメント生成後、内部的にステアリングドキュメントとの整合性を確認：
- product.mdのビジネス目標とタスク目的の整合性
- structure.mdのプロジェクト構造との整合性
- principles.mdの開発原則との一致

問題がある場合のみユーザーに修正を促す。準拠している場合は何も出力しない。
